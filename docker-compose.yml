services:
  test:
    image: bash #nginx
    restart: unless-stopped
    deploy:
      mode: replicated
      replicas: 1
      placement:
        constraints:
          - node.role == worker
    environment:
      TZ: Europe/Berlin
      SOME: Value
      id: dsdsd
      replica_slot: "{{.Task.Slot}}" 
    ports:
      - "80" # Allocate random port on host
    volumes:
      - test:/test
    configs:
      - test.txt
      - source: index.html
        target: /usr/share/nginx/html/index.html
    secrets:
      - secret.txt
    env_file:
      - .env
    labels:
      this: "test"
    networks:
      test:

volumes:
  test:

networks:
  test:

configs:
  test.txt:
    file: test.txt
  index.html:
    file: ./html/index.html

secrets:
  secret.txt:
    file: secret.txt
